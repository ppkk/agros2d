<?xml version="1.0"?>
<coupling:coupling xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="XMLCoupling ../xsd/coupling_xml.xsd"
    xmlns:coupling="XMLCoupling">

    <coupling:general id="current-heat" name="Joule losses">
        <coupling:description>Heat generated by Joule losses in current field
        </coupling:description>
            <coupling:modules>
                <coupling:source id="current" />
                <coupling:target id="heat" />
                </coupling:modules>
    </coupling:general>

    <coupling:constants />

    <coupling:volume>
        <coupling:vector_form id="weak" i="1" j="1" planar="cu_gamma * (source1dx * source1dx + source1dy * source1dy) * vval" axi="cu_gamma * (source1dr * source1dr + source1dz * source1dz) * r * vval"/>
        <coupling:matrix_form id="hard_matrix" i="2" j="1" planar="- cu_gamma * 2 * (updx * udx + updy * udy) * vval" axi="- cu_gamma * 2 * (updr * udr + updz * udz) * r * vval" />
        <coupling:vector_form id="hard_vector" i="2" j="1" planar="- cu_gamma * (updx * updx + updy * updy) * vval"  axi="- cu_gamma * (updr * updr + updz * updz) * r * vval" />

        <coupling:weakforms_volume>
            <coupling:weakform_volume couplingtype="weak" sourceanalysis="steadystate" targetanalysis="steadystate" equation="">
                <coupling:linearity_option type="linear">
                    <coupling:vector_form id="weak" />
                </coupling:linearity_option>
                <coupling:linearity_option type="newton">
                    <coupling:vector_form id="weak" coefficient="-1"/>
                </coupling:linearity_option>
            </coupling:weakform_volume>

            <coupling:weakform_volume couplingtype="hard" sourceanalysis="steadystate" targetanalysis="steadystate" equation="">
                <coupling:linearity_option type="newton">
                    <coupling:matrix_form id="hard_matrix"/>
                    <coupling:vector_form id="hard_vector"/>
                </coupling:linearity_option>
            </coupling:weakform_volume>

            <coupling:weakform_volume couplingtype="weak" sourceanalysis="steadystate" targetanalysis="transient" equation="">
                <coupling:linearity_option type="linear">
                    <coupling:vector_form id="weak" />
                </coupling:linearity_option>
                <coupling:linearity_option type="newton">
                    <coupling:vector_form id="weak" coefficient="-1"/>
                </coupling:linearity_option>
            </coupling:weakform_volume>

            <coupling:weakform_volume couplingtype="hard" sourceanalysis="steadystate" targetanalysis="transient" equation="">
                <coupling:linearity_option type="newton">
                    <coupling:matrix_form id="hard_matrix"/>
                    <coupling:vector_form id="hard_vector"/>
                </coupling:linearity_option>
            </coupling:weakform_volume>

        </coupling:weakforms_volume>
    </coupling:volume>
</coupling:coupling>
